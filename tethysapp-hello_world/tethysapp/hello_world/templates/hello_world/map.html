{% extends tethys_app.package|add:"/base.html" %}
{% load tethys %}

{% block app_content %}
<div class="container my-4">
    <h1>Utah Water Use Map</h1>
    <p>Select the years you want to visualize:</p>

    <div class="d-flex align-items-center mb-3">
        <select id="year-selector" class="form-select w-25 me-2">
            <option value="">-- Select Year --</option>
            <option value="1989-1999">1989-1999</option>
            <option value="2000-2005">2000-2005</option>
            <option value="2005-2010">2005-2010</option>
            <option value="2010-2015">2010-2015</option>
            <option value="2017">2017</option>
            <option value="2018">2018</option>
            <option value="2019">2019</option>
            <option value="2020">2020</option>
            <option value="2021">2021</option>
            <option value="2022">2022</option>
            <option value="2023">2023</option>
        </select>
        <button id="load-map" class="btn btn-primary">Check Water Usage</button>
    </div>

    <div id="map" style="width: 100%; height: 600px;"></div>
</div>

{% endblock %}

{% block after_app_content %}
  <!-- Leaflet CSS & JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

  <!-- Pass the GeoJSON endpoint dynamically from Django -->
  <script>
      const GEOJSON_URL = "{% url 'hello_world:geojson' %}";
  </script>

  <script src="{% static tethys_app|public:'js/main.js' %}"></script>
{% endblock %}